# =============================================================================
# Docker Compose Environment Configuration
# =============================================================================
# This file contains environment variables for running the entire stack
# with docker-compose (PostgreSQL + Langfuse + App).
#
# Usage:
#   1. Copy this file: cp .env.docker .env
#   2. Update OPENROUTER_API_KEY with your actual key
#   3. Run: docker-compose up -d
#
# IMPORTANT: This file is optimized for Docker Compose. For local development
# without Docker, use .env.example instead.
# =============================================================================

# =============================================================================
# OpenRouter Configuration (REQUIRED)
# =============================================================================
# Get your API key from: https://openrouter.ai/keys
# This is the ONLY required variable - everything else has defaults
OPENROUTER_API_KEY=sk-or-v1-your-key-here

# =============================================================================
# PostgreSQL Configuration (App Database)
# =============================================================================
# These match the postgres service in docker-compose.yml
POSTGRES_USER=admin
POSTGRES_PASSWORD=secret
POSTGRES_DB=social_media_posts
POSTGRES_PORT=5432

# Database URL for the application
# Note: Use 'postgres' hostname (Docker service name), not 'localhost'
DATABASE_URL=postgresql://admin:secret@postgres:5432/social_media_posts

# =============================================================================
# Langfuse Configuration
# =============================================================================
# Option 1: Use self-hosted Langfuse (included in docker-compose)
# The app will automatically connect to the Langfuse container
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=http://langfuse:3000

# Langfuse internal configuration (for the Langfuse container itself)
LANGFUSE_NEXTAUTH_SECRET=changeme-nextauth-secret-must-be-at-least-32-characters-long
LANGFUSE_SALT=changeme-salt-must-be-at-least-32-characters-long-for-security
LANGFUSE_TELEMETRY_ENABLED=true
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES=false

# Option 2: Use Langfuse Cloud instead (comment out above, uncomment below)
# Sign up at: https://cloud.langfuse.com
# LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key-here
# LANGFUSE_SECRET_KEY=sk-lf-your-secret-key-here
# LANGFUSE_HOST=https://cloud.langfuse.com

# =============================================================================
# Application Configuration
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=INFO
API_HOST=0.0.0.0
API_PORT=8000

# =============================================================================
# Image Storage Configuration
# =============================================================================
IMAGE_STORAGE_PATH=/app/storage/images
MAX_IMAGE_SIZE_MB=10
IMAGE_FORMAT=png

# =============================================================================
# LangGraph Checkpoint Configuration
# =============================================================================
CHECKPOINT_TABLE_NAME=checkpoints

# =============================================================================
# LLM Model Configuration
# =============================================================================
PRIMARY_MODEL=anthropic/claude-3.5-sonnet
FALLBACK_MODELS=openai/gpt-4o,openai/gpt-3.5-turbo
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000

# =============================================================================
# Image Generation Configuration
# =============================================================================
# Using FREE Gemini model by default (no additional cost!)
IMAGE_MODEL=google/gemini-2.5-flash-image-preview:free
IMAGE_ASPECT_RATIO=1:1

# Legacy DALL-E settings (if you switch to DALL-E models)
IMAGE_SIZE=1024x1024
IMAGE_QUALITY=standard
IMAGE_STYLE=vivid

# =============================================================================
# Evaluation Configuration
# =============================================================================
AUTO_EVALUATE=true
EVALUATION_MODEL=openai/gpt-4o

# =============================================================================
# Security Configuration
# =============================================================================
# Generate a secure secret key for production:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev-secret-key-change-in-production

# CORS origins (adjust for your frontend)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# Quick Start Instructions
# =============================================================================
# 1. Set your OPENROUTER_API_KEY above
# 2. Optional: Generate secure secrets for LANGFUSE_NEXTAUTH_SECRET and LANGFUSE_SALT
# 3. Run: docker-compose up -d
# 4. Wait for services to start (check: docker-compose logs -f)
# 5. Access:
#    - API: http://localhost:8000
#    - API Docs: http://localhost:8000/docs
#    - Langfuse UI: http://localhost:3000
# 6. First time: Create Langfuse account at http://localhost:3000
# 7. Copy API keys from Langfuse UI and update LANGFUSE_PUBLIC_KEY and LANGFUSE_SECRET_KEY above
# 8. Restart: docker-compose restart app
